<!-- ============================================
     üçé macOS Sidebar (Estilo Finder)
     ============================================ -->
<aside class="macos-sidebar">
    <!-- Header da Sidebar -->
    <div class="macos-sidebar-header">
        <div class="macos-sidebar-logo"
            style="display: flex; justify-content: center; align-items: center; padding: 20px 0;">
            <div
                style="background: rgba(0, 0, 0, 0.08); border-radius: 16px; padding: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <img src="/images/logo-fortal.png" alt="Fortal"
                    style="height: 100px; width: 100px; object-fit: contain; transform: scale(1.15);">
            </div>
        </div>
    </div>

    <!-- Navega√ß√£o Principal -->
    <nav style="padding: 12px 8px;">
        <!-- Principal -->
        <div class="macos-sidebar-section">
            <div class="macos-sidebar-section-title">Principal</div>
            <a href="/" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-chart-pie"></i></span>
                <span class="macos-sidebar-item-text">Dashboard</span>
            </a>
        </div>

        <!-- Passo 1: An√°lise -->
        <div class="macos-sidebar-section">
            <div class="macos-sidebar-section-title">An√°lise de Viabilidade</div>

            <a href="/calculadora" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-calculator"></i></span>
                <span class="macos-sidebar-item-text">Calculadora</span>
            </a>

            <a href="/oportunidades" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-gem"></i></span>
                <span class="macos-sidebar-item-text">Oportunidades</span>
            </a>
        </div>

        <!-- Passo 2: Venda -->
        <div class="macos-sidebar-section">
            <div class="macos-sidebar-section-title">Marketing & Vendas</div>

            <a href="/da-vinci" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-file-signature"></i></span>
                <span class="macos-sidebar-item-text">Gerador de Proposta</span>
            </a>

            <a href="/layout" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-brands fa-instagram"></i></span>
                <span class="macos-sidebar-item-text">Gerador de Stories</span>
            </a>
        </div>

        <!-- Documentos / Jur√≠dico -->
        <div class="macos-sidebar-section">
            <div class="macos-sidebar-section-title">Jur√≠dico & Docs</div>

            <a href="/notificacao" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-scale-balanced"></i></span>
                <span class="macos-sidebar-item-text">Notifica√ß√£o Extrajudicial</span>
            </a>

            <a href="/analise-documentos" class="macos-sidebar-item">
                <span class="macos-sidebar-item-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></span>
                <span class="macos-sidebar-item-text">An√°lise Jur√≠dica IA</span>
            </a>
        </div>

        <!-- Passo 3: Gest√£o -->
        <div class="macos-sidebar-section">
            <div class="macos-sidebar-section-title">Gest√£o & CRM</div>


            <% if (false) { %>
                <a href="/leads" class="macos-sidebar-item">
                    <span class="macos-sidebar-item-icon"><i class="fa-solid fa-filter-circle-dollar"></i></span>
                    <span class="macos-sidebar-item-text">Novos Leads</span>
                </a>
                <% } %>


                    <a href="/carteira" class="macos-sidebar-item">
                        <span class="macos-sidebar-item-icon"><i class="fa-solid fa-users"></i></span>
                        <span class="macos-sidebar-item-text">Meus Clientes</span>
                    </a>

                    <a href="/historico" class="macos-sidebar-item">
                        <span class="macos-sidebar-item-icon"><i class="fa-solid fa-clock-rotate-left"></i></span>
                        <span class="macos-sidebar-item-text">Meus Arremates</span>
                    </a>
        </div>

        <% if (user && user.isAdmin) { %>
            <div class="macos-sidebar-section">
                <div class="macos-sidebar-section-title">Administra√ß√£o</div>
                <a href="/admin/invites" class="macos-sidebar-item">
                    <span class="macos-sidebar-item-icon"><i class="fa-solid fa-paper-plane"></i></span>
                    <span class="macos-sidebar-item-text">Gerenciar Convites</span>
                </a>
                <a href="/admin/leads-history" class="macos-sidebar-item">
                    <span class="macos-sidebar-item-icon"><i class="fa-solid fa-eye"></i></span>
                    <span class="macos-sidebar-item-text">Controlador de Leads</span>
                </a>
            </div>
            <% } %>

                <div
                    style="margin-top: 20px; padding: 10px; border-top: 1px solid rgba(0,0,0,0.1); text-align: center; font-size: 10px; color: var(--macos-text-tertiary);">
                    <p>Plataforma criada por <strong>Cesar Ericky Cruz de Andrade</strong>.</p>
                    <p>A plataforma pertence a Cesar Ericky Cruz de Andrade.</p>
                    <p style="margin-top:4px;">&copy; <%= new Date().getFullYear() %> Fortal</p>
                </div>
    </nav>
</aside>

<script>
    // Marcar item ativo baseado na URL atual
    document.addEventListener('DOMContentLoaded', () => {
        const currentPath = window.location.pathname;
        const currentHash = window.location.hash;
        const sidebarItems = document.querySelectorAll('.macos-sidebar-item');

        sidebarItems.forEach(item => {
            const href = item.getAttribute('href');

            // Verificar se √© a p√°gina atual
            if (href === currentPath || (href.includes('#') && href === currentPath + currentHash)) {
                item.classList.add('active');
            }

            // Adicionar listener para marcar como ativo ao clicar
            item.addEventListener('click', () => {
                sidebarItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });
    });
</script>